let t=!1,e=null,r=!1,n=!1,o=!1,i=null,s={},a={};const u={x:0,y:0},l="undefined"==typeof document,c=new Set,d=new Map,h={blockPadding:"auto",adsorptionStrength:10,className:"ipad-cursor",normalStyle:{width:"20px",height:"20px",radius:"50%",durationBase:"0.23s",durationPosition:"0s",durationBackdropFilter:"0s",background:"rgba(150, 150, 150, 0.2)",scale:1,border:"1px solid rgba(100, 100, 100, 0.1)",zIndex:9999,backdropBlur:"0px",backdropSaturate:"180%"},textStyle:{background:"rgba(100, 100, 100, 0.3)",scale:1,width:"4px",height:"1.2em",border:"0px solid rgba(100, 100, 100, 0)",durationBackdropFilter:"1s",radius:"10px"},blockStyle:{background:"rgba(100, 100, 100, 0.3)",border:"1px solid rgba(100, 100, 100, 0.05)",backdropBlur:"0px",durationBase:"0.23s",durationBackdropFilter:"0.1s",backdropSaturate:"120%",radius:"10px"},mouseDownStyle:{background:"rgba(150, 150, 150, 0.3)",scale:.8}};class g{static clamp(t,e,r){return Math.min(Math.max(t,e),r)}static isNum(t){return"number"==typeof t||/^\d+$/.test(t)}static getSize(t){return this.isNum(t)?`${t}px`:t}static getDuration(t){return this.isNum(t)?`${t}ms`:`${t}`}static getColor(t){return t}static objectKeys(t){return Object.keys(t)}static style2Vars(t){const e={backdropBlur:"--cursor-bg-blur",backdropSaturate:"--cursor-bg-saturate",background:"--cursor-bg",border:"--cursor-border",durationBackdropFilter:"--cursor-blur-duration",durationBase:"--cursor-duration",durationPosition:"--cursor-position-duration",height:"--cursor-height",radius:"--cursor-radius",scale:"--cursor-scale",width:"--cursor-width",zIndex:"--cursor-z-index"};return this.objectKeys(t).reduce(((r,n)=>{let o=t[n];if(void 0===o)return r;const i=["background","border"].includes(n),s=["width","height","radius","backdropBlur"].includes(n),a=n.startsWith("duration");i&&(o=this.getColor(o)),s&&(o=this.getSize(o)),a&&(o=this.getDuration(o));const u=e[n]||n;return{...r,[u]:o}}),{})}static isMergebleObject(t){return(e=t)&&"object"==typeof e&&!Array.isArray(e);var e}static mergeDeep(t,...e){if(!e.length)return t;const r=e.shift();return r?(this.isMergebleObject(t)&&this.isMergebleObject(r)&&g.objectKeys(r).forEach((e=>{this.isMergebleObject(r[e])?(t[e]||Object.assign(t,{[e]:{}}),this.mergeDeep(t[e],r[e])):Object.assign(t,{[e]:r[e]})})),this.mergeDeep(t,...e)):t}}function v(t,r){e&&("string"==typeof t?(s[t]=r,r&&e.style.setProperty(t,r)):Object.entries(t).forEach((([t,r])=>{e&&e.style.setProperty(t,r),s[t]=r})))}function p(t){u.x=t.clientX,u.y=t.clientY,function(t){var e;if(r||n||!h.enableAutoTextCursor)return;if(t&&1===t.childNodes.length){const r=t.childNodes[0];if(3===r.nodeType&&""!==(null===(e=r.textContent)||void 0===e?void 0:e.trim()))return t.setAttribute("data-cursor","text"),void z(t)}C()}(t.target)}function b(){o||!h.enableMouseDownEffect||r||(o=!0,a={...s},v(g.style2Vars(h.mouseDownStyle||{})))}function m(){if(!o||!h.enableMouseDownEffect||r)return;o=!1;const t=a;v(g.objectKeys(g.style2Vars(h.mouseDownStyle||{})).reduce(((e,r)=>({...e,[r]:t[r]})),{}))}let f=null;const y=()=>{const t=document.elementFromPoint(u.x,u.y),e=new MouseEvent("mouseleave",{bubbles:!0,cancelable:!0,view:window});t!==f&&f&&e&&f.dispatchEvent(e),f=t};function x(r){l||t||(r&&k(r),t=!0,window.addEventListener("mousemove",p),window.addEventListener("mousedown",b),window.addEventListener("mouseup",m),window.addEventListener("scroll",y),function(){if(l)return;e=document.createElement("div");const t=document.createElement("div");e.classList.add(h.className),t.classList.add("lighting"),e.appendChild(t),document.body.appendChild(e),C()}(),function(){if(i)return;const t=`.${h.className.split(/\s+/).join(".")}`;i=document.createElement("style"),i.innerHTML=`\n    body, * {\n      cursor: none;\n    }\n    ${t} {\n      --cursor-transform-duration: 0.23s;\n      overflow: hidden;\n      pointer-events: none;\n      position: fixed;\n      left: var(--cursor-x);\n      top: var(--cursor-y);\n      width: var(--cursor-width);\n      height: var(--cursor-height);\n      border-radius: var(--cursor-radius);\n      background-color: var(--cursor-bg);\n      border: var(--cursor-border);\n      z-index: var(--cursor-z-index);\n      font-size: var(--cursor-font-size);\n      backdrop-filter:\n        blur(var(--cursor-bg-blur))\n        saturate(var(--cursor-bg-saturate));\n      transition:\n        width var(--cursor-duration) ease,\n        height var(--cursor-duration) ease,\n        border-radius var(--cursor-duration) ease,\n        border var(--cursor-duration) ease,\n        background-color var(--cursor-duration) ease,\n        left var(--cursor-position-duration) ease,\n        top var(--cursor-position-duration) ease,\n        backdrop-filter var(--cursor-blur-duration) ease,\n        transform var(--cursor-transform-duration) ease;\n      transform:\n        translateX(calc(var(--cursor-translateX, 0px) - 50%))\n        translateY(calc(var(--cursor-translateY, 0px) - 50%))\n        scale(var(--cursor-scale, 1));\n    }\n    ${t}.block-active {\n      --cursor-transform-duration: 0s;\n    }\n    ${t} .lighting {\n      display: none;\n    }\n    ${t}.lighting--on .lighting {\n      display: block;\n      width: 0;\n      height: 0;\n      position: absolute;\n      left: calc(var(--lighting-size) / -2);\n      top: calc(var(--lighting-size) / -2);\n      transform: translateX(var(--lighting-offset-x, 0)) translateY(var(--lighting-offset-y, 0));\n      background-image: radial-gradient(\n        circle at center,\n        rgba(255, 255, 255, 0.1) 0%,\n        rgba(255, 255, 255, 0) 30%\n      );\n      border-radius: 50%;\n    }\n    ${t}.block-active .lighting {\n      width: var(--lighting-size, 20px);\n      height: var(--lighting-size, 20px);\n    }\n  `,document.head.appendChild(i)}(),S(),E())}function w(){t&&(t=!1,window.removeEventListener("mousemove",p),window.removeEventListener("scroll",y),e&&e.remove(),i&&i.remove(),i=null,e=null,c.forEach((t=>$(t))))}function k(t){return"adsorptionStrength"in t&&(h.adsorptionStrength=g.clamp(t.adsorptionStrength||10,0,30)),g.mergeDeep(h,t)}function S(){!l&&e&&(r||(v("--cursor-x",`${u.x}px`),v("--cursor-y",`${u.y}px`)),window.requestAnimationFrame(S))}function E(){if(l||!t)return;const o=new Map;(l||!t?[]:document.querySelectorAll("[data-cursor]")).forEach((t=>{o.set(t,!0),c.has(t)||function(t){let o=t.getAttribute("data-cursor");c.add(t),"text"===o&&function(t){let r;function o(t){n=!!t,e&&(t?e.classList.add("text-active"):e.classList.remove("text-active"))}function i(t){r&&clearTimeout(r),o(!0),r=setTimeout((()=>o(!0))),z(t.target)}function s(){r&&clearTimeout(r),r=setTimeout((()=>o(!1))),C()}t.addEventListener("mouseover",i,{passive:!0}),t.addEventListener("mouseleave",s,{passive:!0}),d.set(t,[{event:"mouseover",handler:i},{event:"mouseleave",handler:s}])}(t);"block"===o?function(t){const n=t;let o;function i(t){r=!!t,e&&(t?e.classList.add("block-active"):e.classList.remove("block-active"))}function s(){var t,r;e&&e.classList.toggle("lighting--on",!!h.enableLighting);const s=n.getBoundingClientRect();o&&clearTimeout(o),i(!0),o=setTimeout((()=>i(!0))),e&&e.classList.add("block-active");const a={...h.blockStyle||{}};let u=h.blockPadding||0,l=null==a?void 0:a.radius;if("auto"===u){const t=Math.min(s.width,s.height);u=Math.max(2,Math.floor(t/25))}if("auto"===l){const t=g.getSize(u),e=window.getComputedStyle(n).borderRadius;l=e.startsWith("0")||"none"===e?"0":`calc(${t} + ${e})`,a.radius=l}v("--cursor-x",`${s.left+s.width/2}px`),v("--cursor-y",`${s.top+s.height/2}px`),v("--cursor-width",`${s.width+2*u}px`),v("--cursor-height",`${s.height+2*u}px`);const d={...a,...L(n)};void 0===d.durationPosition&&(d.durationPosition=null!==(t=d.durationBase)&&void 0!==t?t:null===(r=h.normalStyle)||void 0===r?void 0:r.durationBase),v(g.style2Vars(d)),c(!0),n.style.setProperty("transform","translate(var(--translateX), var(--translateY))")}function a(){r||s();const t=n.getBoundingClientRect(),e=t.height/2,o=(u.y-t.top-e)/e,i=t.width/2,a=(u.x-t.left-i)/i,l=h.adsorptionStrength||10;v("--cursor-translateX",a*(t.width/100*l)+"px"),v("--cursor-translateY",o*(t.height/100*l)+"px"),c(!1);const d=a*(t.width/100*l),g=o*(t.height/100*l);if(n.style.setProperty("--translateX",`${d}px`),n.style.setProperty("--translateY",`${g}px`),h.enableLighting){const e=3*Math.max(t.width,t.height)*1.2,r=u.x-t.left,n=u.y-t.top;v("--lighting-size",`${e}px`),v("--lighting-offset-x",`${r}px`),v("--lighting-offset-y",`${n}px`)}}function l(){o&&clearTimeout(o),o=setTimeout((()=>i(!1))),C(),c(!0),n.style.setProperty("transform","translate(0px, 0px)")}function c(t){var e,r,o,i,s,a;const u=t?g.getDuration(null!==(a=null!==(i=null!==(r=null===(e=null==h?void 0:h.blockStyle)||void 0===e?void 0:e.durationPosition)&&void 0!==r?r:null===(o=null==h?void 0:h.blockStyle)||void 0===o?void 0:o.durationBase)&&void 0!==i?i:null===(s=null==h?void 0:h.normalStyle)||void 0===s?void 0:s.durationBase)&&void 0!==a?a:"0.23s"):"";n.style.setProperty("transition",u?`all ${u} cubic-bezier(.58,.09,.46,1.46)`:"none")}n.addEventListener("mouseenter",s,{passive:!0}),n.addEventListener("mousemove",a,{passive:!0}),n.addEventListener("mouseleave",l,{passive:!0}),d.set(n,[{event:"mouseenter",handler:s},{event:"mousemove",handler:a},{event:"mouseleave",handler:l}])}(t):c.delete(t)}(t)})),c.forEach((t=>{o.has(t)||$(t)}))}function $(t){var e;c.delete(t),null===(e=d.get(t))||void 0===e||e.forEach((({event:e,handler:r})=>{"mouseleave"===e&&r(),t.removeEventListener(e,r)})),d.delete(t),t.style.setProperty("transform","none")}function L(t){const e=t.getAttribute("data-cursor-style"),r={};return e&&e.split(/(;)/).forEach((t=>{const[e,n]=t.split(":").map((t=>t.trim()));r[e]=n})),r}function C(){var t;"auto"===(null===(t=h.normalStyle)||void 0===t?void 0:t.radius)&&(h.normalStyle.radius=h.normalStyle.width),v(g.style2Vars(h.normalStyle||{}))}function z(t){v(g.style2Vars(h.textStyle||{}));v("--cursor-font-size",window.getComputedStyle(t).fontSize),v(g.style2Vars({...h.textStyle,...L(t)}))}function B(t){return Object.entries(t).map((([t,e])=>`${t}: ${e}`)).join("; ")}function j(){r=!1,n=!1,C()}const M={TEXT:"text",BLOCK:"block"},P={CursorType:M,resetCursor:j,initCursor:x,updateCursor:E,disposeCursor:w,updateConfig:k,customCursorStyle:B};export{M as CursorType,B as customCursorStyle,P as default,w as disposeCursor,x as initCursor,j as resetCursor,k as updateConfig,E as updateCursor};
